```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
# íŒŒì¼ëª…: engine.py
# ì—­í• : ë°±í…ŒìŠ¤íŒ… ì—”ì§„ êµ¬í˜„ ëª¨ë“ˆ
# - ê³¼ê±° ë°ì´í„°ë¥¼ ì‚¬ìš©í•œ ì „ëµ ì„±ê³¼ ê²€ì¦
# - ê±°ë˜ ì‹œë®¬ë ˆì´ì…˜ ë° ì„±ê³¼ ë¶„ì„
# - ë‹¤ì–‘í•œ ë°±í…ŒìŠ¤íŒ… ì§€í‘œ ê³„ì‚°

"""
ğŸ“ˆ ë°±í…ŒìŠ¤íŒ… ì—”ì§„ v2.0
íˆ¬ì ì „ëµ ë°±í…ŒìŠ¤íŠ¸ ë° ì„±ê³¼ ë¶„ì„
"""

import asyncio
import logging
import pandas as pd
import numpy as np
from datetime import datetime, timedelta
from typing import Dict, List, Any, Optional, Tuple
from dataclasses import dataclass, asdict
import json
import sqlite3
from pathlib import Path
import matplotlib.pyplot as plt
import seaborn as sns
from scipy import stats
import warnings
import yfinance as yf  # ì¶”ê°€
warnings.filterwarnings('ignore')

logger = logging.getLogger(__name__)

# ì—­í• : ë°±í…ŒìŠ¤íŠ¸ ì„¤ì •ì„ ì €ì¥í•˜ëŠ” ë°ì´í„° í´ë˜ìŠ¤
# ì…ë ¥: ì‹œì‘/ì¢…ë£Œ ë‚ ì§œ, ì´ˆê¸° ìë³¸, ìˆ˜ìˆ˜ë£Œìœ¨ ë“±
# ì¶œë ¥: BacktestConfig ì¸ìŠ¤í„´ìŠ¤
@dataclass
class BacktestConfig:
    """ë°±í…ŒìŠ¤íŠ¸ ì„¤ì •"""
    start_date: str
    end_date: str
    initial_capital: float = 10000000  # ì´ˆê¸° ìë³¸ 1ì²œë§Œì›
    commission: float = 0.0015  # ìˆ˜ìˆ˜ë£Œ 0.15%
    slippage: float = 0.001  # ìŠ¬ë¦¬í”¼ì§€ 0.1%
    max_positions: int = 10  # ìµœëŒ€ ë³´ìœ  ì¢…ëª© ìˆ˜
    rebalance_frequency: str = "weekly"  # daily, weekly, monthly
    benchmark: str = "^KS11"  # ì½”ìŠ¤í”¼ ì§€ìˆ˜


# ... (ë‚˜ë¨¸ì§€ ì½”ë“œëŠ” ë™ì¼)

    async def _collect_price_data(self, symbols: List[str]) -> pd.DataFrame:
        """ê°€ê²© ë°ì´í„° ìˆ˜ì§‘"""
        data_frames = []
        try:
            for symbol in symbols:
                try:
                    ticker = yf.Ticker(symbol)
                    hist = ticker.history(
                        start=self.config['start_date'],
                        end=self.config['end_date'],
                        interval='1d'
                    )
                    if not hist.empty:
                        hist['Symbol'] = symbol
                        data_frames.append(hist)
                except Exception as e:
                    logger.warning(f"ì¢…ëª© {symbol} ë°ì´í„° ìˆ˜ì§‘ ì‹¤íŒ¨: {e}")
                    continue

            if data_frames:
                combined_data = pd.concat(data_frames, ignore_index=True)
                return combined_data.sort_values('Date')
            else:
                return pd.DataFrame()

        except Exception as e:
            logger.error(f"ê°€ê²© ë°ì´í„° ìˆ˜ì§‘ ì˜¤ë¥˜: {e}")
            return pd.DataFrame()

    # ... (ë‚˜ë¨¸ì§€ ì½”ë“œëŠ” ë™ì¼)
```