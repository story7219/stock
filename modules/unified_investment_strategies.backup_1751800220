# unified_investment_strategies.py - Core Module ëª¨ë“ˆ
# ì—­í• : Core Module ê´€ë ¨ ê¸°ëŠ¥ ì œê³µ

```python
"""
ğŸ¯ í†µí•© íˆ¬ì ì „ëµ ëª¨ë“ˆ (Unified Investment Strategies)
======================================================

ì „ ì„¸ê³„ íˆ¬ì ëŒ€ê°€ 17ëª…ì˜ ì „ëµì„ êµ¬í˜„í•œ ê³ í’ˆì§ˆ ë¶„ì„ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
ì¤‘ë³µ ì½”ë“œë¥¼ ì œê±°í•˜ê³  ìµœì í™”ëœ ë‹¨ì¼ ëª¨ë“ˆë¡œ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤.

íˆ¬ì ëŒ€ê°€ ëª©ë¡:
1. ì›ŒëŸ° ë²„í• (Warren Buffett) - ê°€ì¹˜íˆ¬ìì˜ ëŒ€ê°€
2. ë²¤ì €ë¯¼ ê·¸ë ˆì´ì—„ (Benjamin Graham) - ê°€ì¹˜íˆ¬ì ì°½ì‹œì
3. í”¼í„° ë¦°ì¹˜ (Peter Lynch) - ì„±ì¥ì£¼ íˆ¬ì ì „ë¬¸ê°€
4. í•„ë¦½ í”¼ì…” (Philip Fisher) - ì„±ì¥ì£¼ ë¶„ì„ì˜ ì•„ë²„ì§€
5. ì¡´ í…œí”Œí„´ (John Templeton) - ê¸€ë¡œë²Œ ê°€ì¹˜íˆ¬ìì
6. ì¡°ì§€ ì†Œë¡œìŠ¤ (George Soros) - ë°˜ì‚¬ì„± ì´ë¡ 
7. ì œì‹œ ë¦¬ë²„ëª¨ì–´ (Jesse Livermore) - ì¶”ì„¸ ë§¤ë§¤ì˜ ì „ì„¤
8. ë¹Œ ì• í¬ë¨¼ (Bill Ackman) - ì•¡í‹°ë¹„ìŠ¤íŠ¸ íˆ¬ìì
9. ì¹¼ ì•„ì´ì¹¸ (Carl Icahn) - ê¸°ì—… ì‚¬ëƒ¥ê¾¼
10. ë ˆì´ ë‹¬ë¦¬ì˜¤ (Ray Dalio) - ì „ì²œí›„ í¬íŠ¸í´ë¦¬ì˜¤
11. ìŠ¤íƒ ë¦¬ ë“œëŸ¬ì¼„ë°€ëŸ¬ (Stanley Druckenmiller) - ê±°ì‹œê²½ì œ íˆ¬ì
12. ë°ì´ë¹„ë“œ í…Œí¼ (David Tepper) - ë””ìŠ¤íŠ¸ë ˆìŠ¤ë“œ íˆ¬ì
13. ì„¸ìŠ¤ í´ë¼ë§Œ (Seth Klarman) - ì ˆëŒ€ìˆ˜ìµ ì¶”êµ¬
14. í•˜ì›Œë“œ ë§‰ìŠ¤ (Howard Marks) - ë¦¬ìŠ¤í¬ ì¡°ì • ìˆ˜ìµ
15. ì¡°ì—˜ ê·¸ë¦°ë¸”ë« (Joel Greenblatt) - ë§ˆë²•ê³µì‹
16. í† ë§ˆìŠ¤ ë¡œìš° í”„ë¼ì´ìŠ¤ (Thomas Rowe Price) - ì„±ì¥ì£¼ íˆ¬ì
17. ì¡´ ë³´ê¸€ (John Bogle) - ì¸ë±ìŠ¤ íˆ¬ì ì² í•™
"""

import math
import logging
from typing import Dict, List, Optional, Any, Tuple
from dataclasses import dataclass
from abc import ABC, abstractmethod
from enum import Enum
import numpy as np

logger = logging.getLogger(__name__)


class StrategyType(Enum):
    """íˆ¬ì ì „ëµ ìœ í˜•"""
    WARREN_BUFFETT = "warren_buffett"
    BENJAMIN_GRAHAM = "benjamin_graham"
    PETER_LYNCH = "peter_lynch"
    PHILIP_FISHER = "philip_fisher"
    JOHN_TEMPLETON = "john_templeton"
    GEORGE_SOROS = "george_soros"
    JESSE_LIVERMORE = "jesse_livermore"
    BILL_ACKMAN = "bill_ackman"
    CARL_ICAHN = "carl_icahn"
    RAY_DALIO = "ray_dalio"
    STANLEY_DRUCKENMILLER = "stanley_druckenmiller"
    DAVID_TEPPER = "david_tepper"
    SETH_KLARMAN = "seth_klarman"
    HOWARD_MARKS = "howard_marks"
    JOEL_GREENBLATT = "joel_greenblatt"
    THOMAS_ROWE_PRICE = "thomas_rowe_price"
    JOHN_BOGLE = "john_bogle"


@dataclass
class StrategyScore:
    """ì „ëµë³„ ì ìˆ˜"""
    strategy_name: str
    score: float  # 0-100 ì ìˆ˜
    weight: float  # ê°€ì¤‘ì¹˜
    reasoning: str  # ì ìˆ˜ ì‚°ì¶œ ê·¼ê±°
    key_metrics: Dict[str, Any]  # ì£¼ìš” ì§€í‘œë“¤


class BaseInvestmentStrategy(ABC):
    """íˆ¬ì ì „ëµ ê¸°ë³¸ í´ë˜ìŠ¤"""

    def __init__(self, name: str, weight: float):
        self.name = name
        self.weight = weight

    @abstractmethod
    def analyze(self, stock_data: Any) -> StrategyScore:
        """ì¢…ëª© ë¶„ì„"""
        pass

    @abstractmethod
    def get_strategy_info(self) -> Dict[str, Any]:
        """ì „ëµ ì •ë³´"""
        pass

    def _safe_get_value(self, stock_data: Any, attr: str, default: Any = 0) -> Any:
        """ì•ˆì „í•œ ì†ì„± ê°’ ì¡°íšŒ"""
        try:
            return getattr(stock_data, attr, default) or default
        except Exception as e:
            logger.warning(f"Attribute error: {e}")
            return default

    def _calculate_technical_score(self, stock_data: Any, indicators: List[str]) -> Tuple[float, List[str]]:
        """ê¸°ìˆ ì  ì§€í‘œ ê¸°ë°˜ ì ìˆ˜ ê³„ì‚°"""
        score = 0.0
        reasoning_parts = []

        if 'rsi' in indicators:
            rsi = self._safe_get_value(stock_data, 'rsi')
            if rsi:
                if 30 <= rsi <= 70:
                    score += 10
                    reasoning_parts.append(f"ì ì • RSI {rsi:.1f} (+10ì )")
                elif rsi < 30:
                    score += 15
                    reasoning_parts.append(f"ê³¼ë§¤ë„ RSI {rsi:.1f} (+15ì )")
                elif rsi > 80:
                    score -= 5
                    reasoning_parts.append(f"ê³¼ë§¤ìˆ˜ RSI {rsi:.1f} (-5ì )")
        return score, reasoning_parts
```