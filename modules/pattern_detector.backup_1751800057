```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ğŸ¯ ê¸°ìˆ ì  íŒ¨í„´ íƒì§€ê¸°
=========================

íŒŒì¼ëª…: modules/pattern_detector.py
ì—­í• : ì‹œê³„ì—´ ë°ì´í„°ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì£¼ìš” ë§¤ë§¤ íŒ¨í„´ì„ íƒì§€í•©ë‹ˆë‹¤.
- ì¶”ì„¸ì „í™˜ (Reversal) íŒ¨í„´ íƒì§€
- ëˆŒë¦¼ëª© ë§¤ìˆ˜ (Pullback Buy) íŒ¨í„´ íƒì§€
- ëŒíŒŒ ë§¤ìˆ˜ (Breakout Buy) íŒ¨í„´ íƒì§€
"""

import logging
from dataclasses import dataclass
from typing import List, Optional, Tuple
import pandas as pd
import numpy as np
import asyncio

logger = logging.getLogger(__name__)

@dataclass
class PatternSignal:
    """íŒ¨í„´ íƒì§€ ì‹ í˜¸"""
    pattern_name: str = "NONE"  # "REVERSAL_BULLISH", "PULLBACK_BUY", "BREAKOUT_BUY", ë“±
    detected_price: Optional[float] = None
    confidence: float = 0.0 # íŒ¨í„´ì˜ ì‹ ë¢°ë„ (0.0 ~ 1.0)
    reasoning: str = "N/A"


class PatternDetector:
    """
    ê¸°ìˆ ì  íŒ¨í„´ íƒì§€ê¸° í´ë˜ìŠ¤.
    ì£¼ì–´ì§„ ê°€ê²© ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë§¤ë§¤ì— í™œìš©í•  ìˆ˜ ìˆëŠ”
    ì¤‘ìš”í•œ ê¸°ìˆ ì  íŒ¨í„´ë“¤ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‹ë³„í•©ë‹ˆë‹¤.
    """
    def __init__(self, short_window: int = 20, long_window: int = 60):
        self.short_window = short_window
        self.long_window = long_window
        logger.info("ê¸°ìˆ ì  íŒ¨í„´ íƒì§€ê¸° ì´ˆê¸°í™” ì™„ë£Œ")

    def detect_all(self, data: pd.DataFrame) -> List[PatternSignal]:
        """
        ì£¼ì–´ì§„ ë°ì´í„°ì—ì„œ ê°€ëŠ¥í•œ ëª¨ë“  íŒ¨í„´ì„ íƒì§€í•©ë‹ˆë‹¤.

        Args:
            data (pd.DataFrame): 'high', 'low', 'close', 'volume' ì»¬ëŸ¼ì„ í¬í•¨í•˜ëŠ” ë°ì´í„°í”„ë ˆì„.

        Returns:
            List[PatternSignal]: íƒì§€ëœ ëª¨ë“  íŒ¨í„´ ì‹ í˜¸ì˜ ë¦¬ìŠ¤íŠ¸.
        """
        if len(data) < self.long_window:
            return []

        signals = [
            self.detect_reversal(data),
            self.detect_pullback(data),
            self.detect_breakout(data)
        ]
        return [signal for signal in signals if signal.pattern_name != "NONE"]


    # ... (ë‚˜ë¨¸ì§€ ì½”ë“œëŠ” ë™ì¼)
```
