```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ğŸš€ í¬íŠ¸í´ë¦¬ì˜¤ ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
==========================================

íŒŒì¼ëª…: run_portfolio_system.py
ì—­í• : ìë³¸ê¸ˆ 5ì–µ êµ­ë‚´/í•´ì™¸ ë°˜ë¶„í•  ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ ì‹¤í–‰
- í™˜ê²½ ì„¤ì • ë° ì´ˆê¸°í™”
- ë¡œê·¸ ë””ë ‰í† ë¦¬ ìƒì„±
- ì‹œìŠ¤í…œ ì‹¤í–‰ ë° ëª¨ë‹ˆí„°ë§
- ì—ëŸ¬ ì²˜ë¦¬ ë° ë³µêµ¬
"""

import asyncio
import logging
import os
import sys
from pathlib import Path
from datetime import datetime
import traceback

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ Python ê²½ë¡œì— ì¶”ê°€
project_root = Path(__file__).parent
sys.path.insert(0, str(project_root))

try:
    from auto_trading_portfolio_system import PortfolioTradingSystem
except ImportError as e:
    print(f"âŒ ëª¨ë“ˆ ì„í¬íŠ¸ ì‹¤íŒ¨: {e}")
    print("í•„ìš”í•œ ëª¨ë“ˆì„ ì„¤ì¹˜í•˜ê±°ë‚˜ ê²½ë¡œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.")
    sys.exit(1)

def setup_environment():
    """í™˜ê²½ ì„¤ì •"""
    print("ğŸ”§ í™˜ê²½ ì„¤ì • ì‹œì‘...")
    
    # ë¡œê·¸ ë””ë ‰í† ë¦¬ ìƒì„±
    log_dir = Path("logs")
    log_dir.mkdir(exist_ok=True)
    print(f"âœ… ë¡œê·¸ ë””ë ‰í† ë¦¬ ìƒì„±: {log_dir}")
    
    # ë°ì´í„° ë””ë ‰í† ë¦¬ ìƒì„±
    data_dir = Path("data")
    data_dir.mkdir(exist_ok=True)
    print(f"âœ… ë°ì´í„° ë””ë ‰í† ë¦¬ ìƒì„±: {data_dir}")
    
    # í™˜ê²½ë³€ìˆ˜ í™•ì¸
    required_env_vars = [
        'LIVE_KIS_APP_KEY',
        'LIVE_KIS_APP_SECRET',
        'LIVE_KIS_ACCOUNT_NUMBER',
        'GEMINI_API_KEY'
    ]
    
    missing_vars = [var for var in required_env_vars if not os.getenv(var)]
    
    if missing_vars:
        print(f"âš ï¸ ëˆ„ë½ëœ í™˜ê²½ë³€ìˆ˜: {', '.join(missing_vars)}")
        print("env.example íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ .env íŒŒì¼ì„ ì„¤ì •í•´ì£¼ì„¸ìš”.")
        return False
    
    print("âœ… í™˜ê²½ ì„¤ì • ì™„ë£Œ")
    return True

def setup_logging():
    """ë¡œê¹… ì„¤ì •"""
    log_file = f"logs/portfolio_system_{datetime.now().strftime('%Y%m%d_%H%M%S')}.log"
    
    logging.basicConfig(
        level=logging.INFO,
        format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
        handlers=[
            logging.FileHandler(log_file, encoding='utf-8'),
            logging.StreamHandler()
        ]
    )
    
    logger = logging.getLogger(__name__)
    logger.info("ğŸš€ í¬íŠ¸í´ë¦¬ì˜¤ ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ ì‹œì‘")
    logger.info(f"ğŸ“ ë¡œê·¸ íŒŒì¼: {log_file}")
    
    return logger

async def run_system():
    """ì‹œìŠ¤í…œ ì‹¤í–‰"""
    logger = logging.getLogger(__name__)
    try:
        # ... (ì¤‘ëµ) ì‹¤ì œ ì‹œìŠ¤í…œ ë¡œì§ ì¶”ê°€ë  ìœ„ì¹˜
        pass
    except KeyboardInterrupt:
        logger.info("â¹ï¸ ì‚¬ìš©ìì— ì˜í•´ ì‹œìŠ¤í…œ ì¤‘ë‹¨")
    except Exception as e:
        logger.error(f"âŒ ì‹œìŠ¤í…œ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}")
        logger.error(f"ìƒì„¸ ì˜¤ë¥˜: {traceback.format_exc()}")
        raise

async def main():
    """ë©”ì¸ í•¨ìˆ˜"""
    print("=" * 60)
    print("ğŸš€ ìë³¸ê¸ˆ 5ì–µ êµ­ë‚´/í•´ì™¸ ë°˜ë¶„í•  ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ")
    print("=" * 60)
    
    # í™˜ê²½ ì„¤ì •
    if not setup_environment():
        print("âŒ í™˜ê²½ ì„¤ì • ì‹¤íŒ¨")
        return
    
    # ë¡œê¹… ì„¤ì •
    logger = setup_logging()
    
    try:
        # ì‹œìŠ¤í…œ ì‹¤í–‰
        await run_system()
    except Exception as e:
        logger.error(f"âŒ ì‹œìŠ¤í…œ ì‹¤í–‰ ì‹¤íŒ¨: {e}")
        print(f"âŒ ì‹œìŠ¤í…œ ì‹¤í–‰ ì‹¤íŒ¨: {e}")
    finally:
        logger.info("ğŸ ì‹œìŠ¤í…œ ì¢…ë£Œ")
        print("ğŸ ì‹œìŠ¤í…œ ì¢…ë£Œ")

if __name__ == "__main__":
    try:
        asyncio.run(main())
    except KeyboardInterrupt:
        print("\nâ¹ï¸ ì‚¬ìš©ìì— ì˜í•´ í”„ë¡œê·¸ë¨ ì¤‘ë‹¨")
    except Exception as e:
        print(f"âŒ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì‹¤íŒ¨: {e}")
        sys.exit(1)
```