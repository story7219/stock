```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ğŸ•°ï¸ KIS API í† í° ìë™ ìŠ¤ì¼€ì¤„ëŸ¬ v1.0
=====================================

ë§¤ì¼ ì•„ì¹¨ 7ì‹œì— ìë™ìœ¼ë¡œ í† í° ë°œê¸‰ ë° ê°±ì‹ 
- í† í° ë§Œë£Œ ì‹œê°„ ì¶”ì 
- ìë™ ê°±ì‹  ìŠ¤ì¼€ì¤„ë§
- ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ë¡œì§
- í…”ë ˆê·¸ë¨ ì•Œë¦¼
- 24ì‹œê°„ ëª¨ë‹ˆí„°ë§
"""

import os
import json
import time
import logging
import asyncio
import schedule
import requests
import aiohttp
from datetime import datetime, timedelta
from typing import Dict, List, Any, Optional
import threading
from dataclasses import dataclass, asdict
import sqlite3

# ë¡œê¹… ì„¤ì •
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('token_scheduler.log', encoding='utf-8'),
        logging.StreamHandler()
    ]
)
logger = logging.getLogger(__name__)

@dataclass
class TokenScheduleInfo:
    """í† í° ìŠ¤ì¼€ì¤„ ì •ë³´"""
    token: str
    token_type: str
    expires_in: int
    issued_at: datetime
    next_refresh: datetime
    refresh_count: int = 0

    @property
    def is_expired(self) -> bool:
        """í† í° ë§Œë£Œ ì—¬ë¶€ (ë§Œë£Œ 30ë¶„ ì „ ê°±ì‹ )"""
        return datetime.now() >= (self.issued_at +
                                 timedelta(seconds=self.expires_in - 1800))

    @property
    def time_until_expiry(self) -> timedelta:
        """ë§Œë£Œê¹Œì§€ ë‚¨ì€ ì‹œê°„"""
        return (self.issued_at +
                timedelta(seconds=self.expires_in)) - datetime.now()


class KISTokenScheduler:
    """KIS API í† í° ìë™ ìŠ¤ì¼€ì¤„ëŸ¬"""
    # ... (ë‚˜ë¨¸ì§€ ì½”ë“œ ë™ì¼)
```
