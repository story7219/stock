# 🤖 제미나이를 위한 양질의 투자 데이터 가공 시스템

## 📋 시스템 개요

이 시스템은 **제미나이 AI**가 투자 분석을 쉽게 할 수 있도록 한국(KOSPI200)과 미국(NASDAQ100) 주식 데이터를 체계적으로 수집, 가공, 분석하는 완전 자동화 파이프라인입니다.

## 🎯 핵심 기능

### 1️⃣ 7단계 데이터 구축 파이프라인
```
[1단계] 종목 리스트 확보 (KOSPI200, NASDAQ100)
[2단계] 과거 1년 주가 / 3M, 6M 수익률 계산  
[3단계] PER, PBR, ROE, ROIC 등 재무데이터 수집
[4단계] 일간 수익률로 변동성(표준편차) 계산
[5단계] 모든 데이터 하나의 Pandas DataFrame으로 합치기
[6단계] 정규화 + 결측치 제거 + 단위 통일
[7단계] 최종 CSV로 저장 (예: stock_data_2024-06-01.csv)
```

### 2️⃣ AI 친화적 데이터 포맷
| 컬럼명 | 설명 | 예시 |
|--------|------|------|
| Date | 기준일 | 2024-06-01 |
| Ticker | 종목코드 | AAPL, 005930.KQ |
| Market | 시장구분 | US, KR |
| Name | 종목명 | Apple Inc., 삼성전자 |
| Sector | 섹터 | Technology, 반도체 |
| Close | 종가 | 192.3, 72500 |
| PER | 주가수익비율 | 22.1, 8.3 |
| PBR | 주가순자산비율 | 4.2, 1.1 |
| ROE | 자기자본이익률(%) | 35.2, 14.1 |
| ROIC | 투하자본이익률(%) | 27.3, 10.2 |
| Return_3M | 3개월 수익률 | 0.11, 0.07 |
| Return_6M | 6개월 수익률 | 0.23, 0.13 |
| Volatility | 연환산 변동성 | 0.15, 0.11 |
| Value_Score | 가치투자 점수 | 75.2 |
| Quality_Score | 품질 점수 | 82.1 |
| Momentum_Score | 모멘텀 점수 | 68.5 |
| Final_Score | 종합 점수 | 76.8 |

### 3️⃣ 제미나이 최적화 프롬프트 자동 생성
- 📊 데이터 개요 요약
- 🎯 투자 점수 기준 설명
- 📈 시장별 평균 지표 비교
- 🏆 TOP 10 추천 종목 리스트
- ❓ 구체적인 분석 요청사항

## 🚀 빠른 시작

### 1. 라이브러리 설치
```bash
pip install -r requirements.txt
```

### 2. 시스템 실행
```python
python gemini_data_processor.py
```

### 3. 결과 확인
```
📁 data/
├── stock_data_2024-06-01.csv      # 📊 가공된 주식 데이터
├── summary_2024-06-01.json        # 📋 시장 요약 정보
└── gemini_prompt_2024-06-01.txt   # 🤖 제미나이 프롬프트
```

## 📊 투자 점수 계산 방식

### Value Score (가치투자 점수)
```python
Value_Score = PER 역순위(60%) + PBR 역순위(40%)
# PER↓, PBR↓일수록 높은 점수
```

### Quality Score (품질 점수)  
```python
Quality_Score = ROE 순위(50%) + ROIC 순위(50%)
# ROE↑, ROIC↑일수록 높은 점수
```

### Momentum Score (모멘텀 점수)
```python  
Momentum_Score = 3M수익률 순위(40%) + 6M수익률 순위(60%)
# 수익률↑일수록 높은 점수
```

### Final Score (종합 점수)
```python
Final_Score = Value(30%) + Quality(30%) + Momentum(30%) + 저변동성(10%)
# 0-100점 범위, 높을수록 투자 매력도 상승
```

## 🎯 실전 투자 기준값

### 📈 가치투자 기준
- **PER**: 0~15배 (저평가)
- **PBR**: 0~1.5배 (저평가)

### 🌟 품질투자 기준  
- **ROE**: 15% 이상 (우수한 수익성)
- **ROIC**: 10% 이상 (효율적 자본 운용)

### 🚀 모멘텀 기준
- **3개월 수익률**: 5% 이상
- **6개월 수익률**: 10% 이상

### 🛡️ 안정성 기준
- **변동성**: 30% 이하 (연환산)

## 🤖 제미나이 활용 예시

### 1. 데이터 수집 후 자동 생성되는 프롬프트 예시:
```
🤖 제미나이 투자 분석 요청

📊 데이터 개요
- 총 종목 수: 40개
- 한국 주식: 20개  
- 미국 주식: 20개
- 분석 기준일: 2024-06-01

🎯 투자 점수 기준
- Value Score: PER↓ + PBR↓ (저평가 우선)
- Quality Score: ROE↑ + ROIC↑ (수익성 우선)  
- Momentum Score: 3M/6M 수익률↑ (상승 추세)
- Final Score: 종합 점수 (0-100점)

📈 현재 시장 상황
한국 시장 평균: PER 12.5배, ROE 8.2%, 6개월 수익률 5.1%
미국 시장 평균: PER 18.3배, ROE 15.7%, 6개월 수익률 12.4%

🏆 TOP 10 추천 종목
1. AAPL (Apple Inc.) - US - 점수: 85.2
2. 005930.KQ (삼성전자) - KR - 점수: 82.1
...

❓ 분석 요청사항
1. 위 데이터를 바탕으로 현재 시장 상황을 분석해주세요
2. TOP 10 종목 중 가장 매력적인 5개 종목을 선별하고 이유를 설명해주세요
3. 한국과 미국 시장 중 어느 쪽이 더 투자 기회가 많은지 판단해주세요
4. 향후 3-6개월 투자 전략을 제시해주세요
```

### 2. 제미나이 예상 답변 형태:
```
📊 시장 분석 결과

현재 미국 시장이 한국 시장보다 투자 매력도가 높습니다.
- 미국: 높은 ROE(15.7%), 강한 모멘텀(12.4%)
- 한국: 저평가 매력(PER 12.5배), 하지만 성장성 제한적

🏆 추천 종목 TOP 5
1. AAPL - 기술 혁신과 안정적 수익성 조화
2. 005930.KQ - 저평가된 글로벌 반도체 리더  
3. MSFT - 클라우드 성장과 AI 혁신
4. 000660.KQ - 배당 매력과 안정성
5. GOOGL - 검색 독점과 AI 경쟁력

💡 3-6개월 투자 전략
- 미국 기술주 60% + 한국 대형주 40% 포트폴리오 구성
- 변동성 관리를 위한 분산투자 필수
- 분기별 리밸런싱으로 수익 최적화
```

## 🔧 고급 설정

### 데이터 수집 범위 조정
```python
# 한국 종목 수 조정 (기본: 20개)
kr_tickers = kr_tickers[:50]  # 50개로 확장

# 미국 종목 수 조정 (기본: 20개)  
us_tickers = us_tickers[:30]  # 30개로 확장
```

### 투자 점수 가중치 조정
```python
# 종합 점수 계산 가중치 변경
Final_Score = (
    Value_Score * 0.4 +      # 가치투자 비중 증가
    Quality_Score * 0.3 +
    Momentum_Score * 0.2 +   # 모멘텀 비중 감소
    Volatility_Score * 0.1
)
```

### 특정 날짜 데이터 수집
```python
# 특정 날짜 기준으로 데이터 수집
processor = GeminiDataProcessor()
df, summary = processor.build_complete_dataset("2024-05-15")
```

## 📈 데이터 품질 보장

### ✅ 데이터 검증 과정
1. **결측치 처리**: 50% 이상 결측치 행 제거
2. **극단값 제거**: 상하위 1% 아웃라이어 제거  
3. **음수 제거**: PER, PBR 음수값 제거
4. **단위 통일**: ROE, ROIC 백분율 통일
5. **정규화**: 0-100점 범위로 점수 표준화

### 📊 데이터 소스 신뢰성
- **한국 주식**: PyKRX (한국거래소 공식 API)
- **미국 주식**: Yahoo Finance API (실시간 데이터)
- **재무 지표**: 공식 재무제표 기반 계산
- **수익률**: 조정 종가 기준 정확한 계산

## 🚨 주의사항

### ⚠️ 투자 리스크
- 이 시스템은 **참고용**이며 투자 결정의 전부가 아닙니다
- 시장 변동성, 거시경제 요인 등 추가 고려 필요
- 과거 데이터 기반이므로 미래 수익을 보장하지 않음

### 🔧 기술적 제한사항  
- API 호출 제한으로 대량 데이터 수집 시 시간 소요
- 실시간 데이터가 아닌 일봉 기준 데이터
- 일부 재무 지표는 분기별 업데이트

## 📞 문의 및 지원

시스템 사용 중 문제가 발생하거나 개선 사항이 있다면:
1. 로그 파일 확인: `gemini_data_processor.log`
2. 데이터 품질 검증: `data/summary_YYYY-MM-DD.json`
3. 에러 디버깅: 콘솔 출력 메시지 확인

---

**🎯 목표**: 제미나이가 전문 투자 분석가 수준의 인사이트를 제공할 수 있도록 최고 품질의 데이터와 분석 프레임워크 제공

**🚀 비전**: AI와 인간이 협력하는 차세대 투자 의사결정 시스템 구축 