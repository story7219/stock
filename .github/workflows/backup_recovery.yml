name: "ğŸ’¾ ìë™ ë°±ì—… ë° ë³µêµ¬ ê´€ë¦¬"

on:
  schedule:
    - cron: '0 3 * * 0'      # ë§¤ì£¼ ì¼ìš”ì¼ 12:00 (ì£¼ê°„ ë°±ì—…)
    - cron: '0 23 * * *'     # ë§¤ì¼ 08:00 (ì¼ì¼ ë°±ì—…)
  workflow_dispatch:
    inputs:
      backup_type:
        description: 'ë°±ì—… íƒ€ì… ì„ íƒ'
        required: false
        default: 'daily'
        type: choice
        options:
          - 'daily'
          - 'weekly'
          - 'full_system'
          - 'config_only'
  push:
    branches: [ main, develop ]

jobs:
  backup_system:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ ì½”ë“œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v4
        with:
          fetch-depth: 0  # ì „ì²´ íˆìŠ¤í† ë¦¬ ê°€ì ¸ì˜¤ê¸°

      - name: ğŸ Python í™˜ê²½ ì„¤ì •
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: ğŸ“¦ ë°±ì—… ë„êµ¬ ì„¤ì¹˜
        run: |
          pip install --upgrade pip
          pip install requests python-dateutil
          sudo apt-get update
          sudo apt-get install -y zip unzip tar gzip

      - name: ğŸ“‹ ë°±ì—… ëŒ€ìƒ ë¶„ì„
        run: |
          python -c "
          import os
          import json
          from datetime import datetime
          
          print('ğŸ“‹ ë°±ì—… ëŒ€ìƒ íŒŒì¼ ë¶„ì„')
          print('=' * 50)
          
          # ë°±ì—… ëŒ€ìƒ ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¥˜
          categories = {
              'í•µì‹¬ íŠ¸ë ˆì´ë”© íŒŒì¼': [
                  'core_trader.py',
                  'advanced_scalping_system.py',
                  'config.py'
              ],
              'ì›Œí¬í”Œë¡œìš° íŒŒì¼': [
                  '.github/workflows/trading.yml',
                  '.github/workflows/code_review.yml',
                  '.github/workflows/report.yml',
                  '.github/workflows/security_audit.yml',
                  '.github/workflows/system_health.yml'
              ],
              'í…ŒìŠ¤íŠ¸ ë° ìœ í‹¸': [
                  'test_optimized_scalping.py',
                  'requirements.txt',
                  '.gitignore'
              ],
              'ì„¤ì • ë° ë¬¸ì„œ': [
                  'README.md',
                  '.env.example'
              ]
          }
          
          total_size = 0
          backup_manifest = {}
          
          for category, files in categories.items():
              category_size = 0
              category_files = []
              
              print(f'\\nğŸ“‚ {category}:')
              for file_path in files:
                  if os.path.exists(file_path):
                      size = os.path.getsize(file_path)
                      mtime = os.path.getmtime(file_path)
                      
                      category_files.append({
                          'path': file_path,
                          'size': size,
                          'modified': datetime.fromtimestamp(mtime).isoformat()
                      })
                      
                      category_size += size
                      total_size += size
                      print(f'   âœ… {file_path} ({size:,} bytes)')
                  else:
                      print(f'   âŒ {file_path} (íŒŒì¼ ì—†ìŒ)')
              
              backup_manifest[category] = {
                  'files': category_files,
                  'total_size': category_size
              }
          
          print(f'\\nğŸ“Š ë°±ì—… ìš”ì•½:')
          print(f'   ì´ íŒŒì¼ í¬ê¸°: {total_size:,} bytes ({total_size/1024:.1f} KB)')
          print(f'   ë°±ì—… ì‹œê°„: {datetime.now().isoformat()}')
          
          # ë°±ì—… ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ì €ì¥
          with open('backup_manifest.json', 'w', encoding='utf-8') as f:
              json.dump(backup_manifest, f, ensure_ascii=False, indent=2)
          
          print('\\nâœ… ë°±ì—… ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ìƒì„± ì™„ë£Œ')
          "

      - name: ğŸ—œï¸ íŒŒì¼ ë°±ì—… ìƒì„±
        run: |
          python -c "
          import os
          import shutil
          import subprocess
          from datetime import datetime
          
          print('ğŸ—œï¸ ë°±ì—… íŒŒì¼ ìƒì„±')
          print('=' * 50)
          
          backup_type = '${{ github.event.inputs.backup_type }}' or 'incremental'
          timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
          
          # ë°±ì—… ë””ë ‰í† ë¦¬ ìƒì„±
          backup_dir = f'backup_{timestamp}'
          os.makedirs(backup_dir, exist_ok=True)
          
          print(f'ğŸ“ ë°±ì—… ë””ë ‰í† ë¦¬: {backup_dir}')
          print(f'ğŸ”§ ë°±ì—… íƒ€ì…: {backup_type}')
          
          # í•µì‹¬ íŒŒì¼ë“¤ ë°±ì—…
          core_files = [
              'core_trader.py',
              'advanced_scalping_system.py', 
              'config.py',
              'test_optimized_scalping.py',
              'requirements.txt',
              '.gitignore',
              'backup_manifest.json'
          ]
          
          # ì›Œí¬í”Œë¡œìš° ë””ë ‰í† ë¦¬ ë°±ì—…
          workflows_backup = os.path.join(backup_dir, 'workflows')
          os.makedirs(workflows_backup, exist_ok=True)
          
          if os.path.exists('.github/workflows'):
              for workflow_file in os.listdir('.github/workflows'):
                  if workflow_file.endswith('.yml'):
                      shutil.copy2(
                          os.path.join('.github/workflows', workflow_file),
                          os.path.join(workflows_backup, workflow_file)
                      )
                      print(f'   ğŸ“„ ì›Œí¬í”Œë¡œìš° ë³µì‚¬: {workflow_file}')
          
          # í•µì‹¬ íŒŒì¼ ë°±ì—…
          files_backup = os.path.join(backup_dir, 'core_files')
          os.makedirs(files_backup, exist_ok=True)
          
          for file_path in core_files:
              if os.path.exists(file_path):
                  shutil.copy2(file_path, os.path.join(files_backup, os.path.basename(file_path)))
                  print(f'   ğŸ“„ íŒŒì¼ ë³µì‚¬: {file_path}')
          
          # Git ì •ë³´ ë°±ì—…
          git_info = {
              'commit_hash': subprocess.check_output(['git', 'rev-parse', 'HEAD']).decode().strip(),
              'branch': subprocess.check_output(['git', 'rev-parse', '--abbrev-ref', 'HEAD']).decode().strip(),
              'commit_message': subprocess.check_output(['git', 'log', '-1', '--pretty=%s']).decode().strip(),
              'backup_timestamp': timestamp
          }
          
          with open(os.path.join(backup_dir, 'git_info.json'), 'w') as f:
              import json
              json.dump(git_info, f, indent=2)
          
          print(f'   ğŸ“„ Git ì •ë³´ ì €ì¥: {git_info[\"commit_hash\"][:8]}')
          
          # ì••ì¶• íŒŒì¼ ìƒì„±
          backup_name = f'trading_system_backup_{timestamp}'
          
          # ZIP í˜•ì‹ìœ¼ë¡œ ì••ì¶•
          shutil.make_archive(backup_name, 'zip', backup_dir)
          print(f'   ğŸ—œï¸ ZIP ë°±ì—… ìƒì„±: {backup_name}.zip')
          
          # TAR.GZ í˜•ì‹ìœ¼ë¡œë„ ì••ì¶• (ì¶”ê°€ ë³´ì•ˆ)
          shutil.make_archive(backup_name, 'gztar', backup_dir)
          print(f'   ğŸ—œï¸ TAR.GZ ë°±ì—… ìƒì„±: {backup_name}.tar.gz')
          
          # ë°±ì—… íŒŒì¼ í¬ê¸° í™•ì¸
          zip_size = os.path.getsize(f'{backup_name}.zip')
          tar_size = os.path.getsize(f'{backup_name}.tar.gz')
          
          print(f'\\nğŸ“Š ë°±ì—… íŒŒì¼ í¬ê¸°:')
          print(f'   ZIP: {zip_size:,} bytes ({zip_size/1024:.1f} KB)')
          print(f'   TAR.GZ: {tar_size:,} bytes ({tar_size/1024:.1f} KB)')
          
          # ì„ì‹œ ë””ë ‰í† ë¦¬ ì •ë¦¬
          shutil.rmtree(backup_dir)
          print('\\nâœ… ë°±ì—… ìƒì„± ì™„ë£Œ')
          "

      - name: ğŸ” ë°±ì—… ë¬´ê²°ì„± ê²€ì¦
        run: |
          python -c "
          import os
          import zipfile
          import tarfile
          import hashlib
          from datetime import datetime
          
          print('ğŸ” ë°±ì—… ë¬´ê²°ì„± ê²€ì¦')
          print('=' * 50)
          
          timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
          backup_name = f'trading_system_backup_{timestamp}'
          
          # ë°±ì—… íŒŒì¼ë“¤ ì°¾ê¸°
          backup_files = []
          for file in os.listdir('.'):
              if file.startswith('trading_system_backup_') and (file.endswith('.zip') or file.endswith('.tar.gz')):
                  backup_files.append(file)
          
          if not backup_files:
              print('âš ï¸ ë°±ì—… íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤')
              exit(1)
          
          backup_files.sort(reverse=True)  # ìµœì‹  íŒŒì¼ë¶€í„°
          latest_zip = None
          latest_tar = None
          
          for file in backup_files:
              if file.endswith('.zip') and not latest_zip:
                  latest_zip = file
              elif file.endswith('.tar.gz') and not latest_tar:
                  latest_tar = file
          
          print(f'ğŸ“¦ ê²€ì¦ ëŒ€ìƒ íŒŒì¼:')
          if latest_zip:
              print(f'   ZIP: {latest_zip}')
          if latest_tar:
              print(f'   TAR.GZ: {latest_tar}')
          
          # ZIP íŒŒì¼ ê²€ì¦
          if latest_zip and os.path.exists(latest_zip):
              try:
                  with zipfile.ZipFile(latest_zip, 'r') as zf:
                      test_result = zf.testzip()
                      if test_result is None:
                          print(f'   âœ… ZIP íŒŒì¼ ë¬´ê²°ì„± í™•ì¸')
                          
                          # íŒŒì¼ ëª©ë¡ í™•ì¸
                          file_list = zf.namelist()
                          print(f'   ğŸ“ í¬í•¨ëœ íŒŒì¼ ìˆ˜: {len(file_list)}ê°œ')
                          
                          # ì¤‘ìš” íŒŒì¼ ì¡´ì¬ í™•ì¸
                          required_files = ['core_trader.py', 'config.py', 'advanced_scalping_system.py']
                          missing_files = []
                          
                          for req_file in required_files:
                              found = any(req_file in path for path in file_list)
                              if not found:
                                  missing_files.append(req_file)
                          
                          if missing_files:
                              print(f'   âš ï¸ ëˆ„ë½ëœ ì¤‘ìš” íŒŒì¼: {missing_files}')
                          else:
                              print(f'   âœ… ëª¨ë“  ì¤‘ìš” íŒŒì¼ í¬í•¨ë¨')
                      else:
                          print(f'   âŒ ZIP íŒŒì¼ ì†ìƒ: {test_result}')
              except Exception as e:
                  print(f'   âŒ ZIP ê²€ì¦ ì‹¤íŒ¨: {e}')
          
          # TAR.GZ íŒŒì¼ ê²€ì¦
          if latest_tar and os.path.exists(latest_tar):
              try:
                  with tarfile.open(latest_tar, 'r:gz') as tf:
                      member_names = tf.getnames()
                      print(f'   âœ… TAR.GZ íŒŒì¼ ì½ê¸° ì„±ê³µ')
                      print(f'   ğŸ“ í¬í•¨ëœ í•­ëª© ìˆ˜: {len(member_names)}ê°œ')
              except Exception as e:
                  print(f'   âŒ TAR.GZ ê²€ì¦ ì‹¤íŒ¨: {e}')
          
          # ì²´í¬ì„¬ ìƒì„±
          checksums = {}
          for backup_file in [latest_zip, latest_tar]:
              if backup_file and os.path.exists(backup_file):
                  hasher = hashlib.sha256()
                  with open(backup_file, 'rb') as f:
                      for chunk in iter(lambda: f.read(4096), b''):
                          hasher.update(chunk)
                  checksums[backup_file] = hasher.hexdigest()
                  print(f'   ğŸ” {backup_file} SHA256: {checksums[backup_file][:16]}...')
          
          # ì²´í¬ì„¬ íŒŒì¼ ì €ì¥
          if checksums:
              with open('backup_checksums.txt', 'w') as f:
                  for file, checksum in checksums.items():
                      f.write(f'{checksum}  {file}\\n')
              print('   ğŸ“„ ì²´í¬ì„¬ íŒŒì¼ ìƒì„±: backup_checksums.txt')
          
          print('\\nâœ… ë°±ì—… ë¬´ê²°ì„± ê²€ì¦ ì™„ë£Œ')
          "

      - name: ğŸ“š ë³µêµ¬ ê°€ì´ë“œ ìƒì„±
        run: |
          python -c "
          from datetime import datetime
          
          print('ğŸ“š ë³µêµ¬ ê°€ì´ë“œ ìƒì„±')
          print('=' * 50)
          
          recovery_guide = '''# ğŸš‘ íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œ ë³µêµ¬ ê°€ì´ë“œ
          
          ## ğŸ“… ë°±ì—… ì •ë³´
          - ë°±ì—… ìƒì„±ì¼: {timestamp}
          - ë°±ì—… íƒ€ì…: {backup_type}
          - Git ì»¤ë°‹: {git_commit}
          
          ## ğŸ”§ ë³µêµ¬ ì ˆì°¨
          
          ### 1ë‹¨ê³„: ë°±ì—… íŒŒì¼ í™•ì¸
          ```bash
          # ë°±ì—… íŒŒì¼ ë¬´ê²°ì„± ê²€ì¦
          sha256sum -c backup_checksums.txt
          ```
          
          ### 2ë‹¨ê³„: ë°±ì—… ì••ì¶• í•´ì œ
          ```bash
          # ZIP íŒŒì¼ í•´ì œ
          unzip trading_system_backup_*.zip
          
          # ë˜ëŠ” TAR.GZ íŒŒì¼ í•´ì œ
          tar -xzf trading_system_backup_*.tar.gz
          ```
          
          ### 3ë‹¨ê³„: í•µì‹¬ íŒŒì¼ ë³µêµ¬
          ```bash
          # í•µì‹¬ íŠ¸ë ˆì´ë”© íŒŒì¼ ë³µì‚¬
          cp backup_*/core_files/* ./
          
          # ì›Œí¬í”Œë¡œìš° íŒŒì¼ ë³µì‚¬
          cp -r backup_*/workflows/* .github/workflows/
          ```
          
          ### 4ë‹¨ê³„: í™˜ê²½ ì„¤ì • ë³µêµ¬
          ```bash
          # ê°€ìƒí™˜ê²½ ì¬ìƒì„±
          python -m venv .venv
          source .venv/bin/activate  # Linux/Mac
          # ë˜ëŠ” .venv\\Scripts\\activate  # Windows
          
          # ì˜ì¡´ì„± ì¬ì„¤ì¹˜
          pip install -r requirements.txt
          ```
          
          ### 5ë‹¨ê³„: ì„¤ì • íŒŒì¼ ë³µêµ¬
          ```bash
          # .env íŒŒì¼ ìˆ˜ë™ ìƒì„± (ë°±ì—…ì— í¬í•¨ë˜ì§€ ì•ŠìŒ)
          cp .env.example .env
          # ì‹¤ì œ API í‚¤ì™€ í† í° ì…ë ¥ í•„ìš”
          ```
          
          ### 6ë‹¨ê³„: ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
          ```bash
          # ëª¨ë“ˆ ë¡œë“œ í…ŒìŠ¤íŠ¸
          python -c "from config import *; print('âœ… Config ë¡œë“œ ì„±ê³µ')"
          python -c "from core_trader import CoreTrader; print('âœ… CoreTrader ë¡œë“œ ì„±ê³µ')"
          python -c "from advanced_scalping_system import AdvancedScalpingSystem; print('âœ… ìŠ¤ìº˜í•‘ ì‹œìŠ¤í…œ ë¡œë“œ ì„±ê³µ')"
          ```
          
          ## âš ï¸ ì£¼ì˜ì‚¬í•­
          
          1. **í™˜ê²½ë³€ìˆ˜ ì¬ì„¤ì •**: ë°±ì—…ì—ëŠ” ë¯¼ê°í•œ ì •ë³´ê°€ í¬í•¨ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ API í‚¤ ë“±ì„ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.
          2. **GitHub Secrets**: GitHub Actionsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° Secrets ì¬ì„¤ì •ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          3. **ë„¤íŠ¸ì›Œí¬ ì„¤ì •**: ë°©í™”ë²½ì´ë‚˜ í”„ë¡ì‹œ ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”.
          4. **ê¶Œí•œ ì„¤ì •**: íŒŒì¼ ì‹¤í–‰ ê¶Œí•œì„ í™•ì¸í•˜ê³  í•„ìš”ì‹œ ì¡°ì •í•˜ì„¸ìš”.
          
          ## ğŸ†˜ ê¸´ê¸‰ ì—°ë½ì²˜
          
          - GitHub Issues: [í”„ë¡œì íŠ¸ ì €ì¥ì†Œ]/issues
          - ì‹œìŠ¤í…œ ê´€ë¦¬ì: [ì—°ë½ì²˜ ì •ë³´]
          
          ## ğŸ“‹ ë³µêµ¬ ì²´í¬ë¦¬ìŠ¤íŠ¸
          
          - [ ] ë°±ì—… íŒŒì¼ ë¬´ê²°ì„± í™•ì¸
          - [ ] ì••ì¶• íŒŒì¼ í•´ì œ
          - [ ] í•µì‹¬ íŒŒì¼ ë³µì‚¬
          - [ ] ì›Œí¬í”Œë¡œìš° ë³µêµ¬
          - [ ] ê°€ìƒí™˜ê²½ ì¬ìƒì„±
          - [ ] ì˜ì¡´ì„± ì„¤ì¹˜
          - [ ] í™˜ê²½ë³€ìˆ˜ ì„¤ì •
          - [ ] ëª¨ë“ˆ ë¡œë“œ í…ŒìŠ¤íŠ¸
          - [ ] API ì—°ê²° í…ŒìŠ¤íŠ¸
          - [ ] íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œ ê°€ë™ í…ŒìŠ¤íŠ¸
          
          ---
          *ì´ ê°€ì´ë“œëŠ” ìë™ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ë³µêµ¬ ì‹œ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ìµœì‹  ë¬¸ì„œë¥¼ í™•ì¸í•˜ì„¸ìš”.*
          '''.format(
              timestamp=datetime.now().strftime('%Y-%m-%d %H:%M:%S'),
              backup_type='${{ github.event.inputs.backup_type }}' or 'incremental',
              git_commit='${{ github.sha }}' if '${{ github.sha }}' != '' else 'unknown'
          )
          
          with open('RECOVERY_GUIDE.md', 'w', encoding='utf-8') as f:
              f.write(recovery_guide)
          
          print('âœ… ë³µêµ¬ ê°€ì´ë“œ ìƒì„± ì™„ë£Œ: RECOVERY_GUIDE.md')
          "

      - name: ğŸ“± ë°±ì—… ì™„ë£Œ ì•Œë¦¼
        if: success()
        run: |
          python -c "
          import requests
          import os
          from datetime import datetime
          
          bot_token = os.environ.get('TELEGRAM_BOT_TOKEN')
          chat_id = os.environ.get('TELEGRAM_CHAT_ID')
          
          if bot_token and chat_id and bot_token != 'test_telegram_token':
              backup_type = '${{ github.event.inputs.backup_type }}' or 'incremental'
              
              message = f'''ğŸ’¾ ì‹œìŠ¤í…œ ë°±ì—… ì™„ë£Œ!
              
              ğŸ“… ë°±ì—… ì‹œê°„: {datetime.now().strftime('%Y-%m-%d %H:%M')}
              ğŸ”§ ë°±ì—… íƒ€ì…: {backup_type}
              
              âœ… í•µì‹¬ íŠ¸ë ˆì´ë”© íŒŒì¼ ë°±ì—… ì™„ë£Œ
              âœ… ì›Œí¬í”Œë¡œìš° ì„¤ì • ë°±ì—… ì™„ë£Œ
              âœ… ë°±ì—… ë¬´ê²°ì„± ê²€ì¦ ì™„ë£Œ
              âœ… ë³µêµ¬ ê°€ì´ë“œ ìƒì„± ì™„ë£Œ
              
              ğŸ›¡ï¸ ì‹œìŠ¤í…œ ë³µêµ¬ ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.'''
              
              try:
                  requests.post(
                      f'https://api.telegram.org/bot{bot_token}/sendMessage',
                      json={'chat_id': chat_id, 'text': message}
                  )
                  print('âœ… ë°±ì—… ì™„ë£Œ ì•Œë¦¼ ì „ì†¡')
              except Exception as e:
                  print(f'âš ï¸ í…”ë ˆê·¸ë¨ ì „ì†¡ ì‹¤íŒ¨: {e}')
          else:
              print('âœ… ë°±ì—… ì™„ë£Œ (í…ŒìŠ¤íŠ¸ ëª¨ë“œ)')
          "
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}

      - name: ğŸš¨ ë°±ì—… ì‹¤íŒ¨ ì•Œë¦¼
        if: failure()
        run: |
          python -c "
          import requests
          import os
          from datetime import datetime
          
          bot_token = os.environ.get('TELEGRAM_BOT_TOKEN')
          chat_id = os.environ.get('TELEGRAM_CHAT_ID')
          
          if bot_token and chat_id and bot_token != 'test_telegram_token':
              message = f'''ğŸš¨ ë°±ì—… í”„ë¡œì„¸ìŠ¤ ì‹¤íŒ¨!
              
              âš ï¸ ì‹œìŠ¤í…œ ë°±ì—… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
              ğŸ“… {datetime.now().strftime('%Y-%m-%d %H:%M')}
              
              ğŸ” ê°€ëŠ¥í•œ ì›ì¸:
              - ë””ìŠ¤í¬ ê³µê°„ ë¶€ì¡±
              - íŒŒì¼ ê¶Œí•œ ë¬¸ì œ
              - ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜
              
              ì¦‰ì‹œ ì ê²€ì´ í•„ìš”í•©ë‹ˆë‹¤!'''
              
              try:
                  requests.post(
                      f'https://api.telegram.org/bot{bot_token}/sendMessage',
                      json={'chat_id': chat_id, 'text': message}
                  )
              except:
                  pass
          print('ğŸš¨ ë°±ì—… ì‹¤íŒ¨ ì•Œë¦¼')
          "
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}