# technical.py - Test ëª¨ë“ˆ
# ì—­í• : Test ê´€ë ¨ ê¸°ëŠ¥ ì œê³µ

```python
# ğŸ“Š ê¸°ìˆ ì  ë¶„ì„ ëª¨ë“ˆ v2.0
# - ITechnicalAnalyzer ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ ë° í‘œì¤€í™”ëœ ë°ì´í„° êµ¬ì¡° ì‚¬ìš©
# - RSI, MACD, ë³¼ë¦°ì €ë°´ë“œ, ì´ë™í‰ê·  ë“± ì£¼ìš” ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°
# - ì‹¤ì‹œê°„ ì‹ í˜¸ ìƒì„± ë° ì‹ ë¢°ë„ í‰ê°€

from ..core.base_interfaces import (
    ITechnicalAnalyzer, StockData, TechnicalIndicators,
    TechnicalSignals, TechnicalAnalysisResult, AnalysisError, MarketType
)
from datetime import datetime
from loguru import logger
from typing import Dict, List, Tuple, Optional, Any, Union
import numpy as np
import os
import pandas as pd
import random
import ta


class TechnicalAnalyzer(ITechnicalAnalyzer):
    """ê¸°ìˆ ì  ë¶„ì„ê¸° - ITechnicalAnalyzer ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„"""

    def __init__(self):
        """ê¸°ìˆ ì  ë¶„ì„ê¸° ì´ˆê¸°í™”"""
        self.indicators = {}
        logger.info("ğŸ”§ TechnicalAnalyzer ì´ˆê¸°í™” ì™„ë£Œ")

    async def analyze(self, data: Union[str, StockData]) -> TechnicalAnalysisResult:
        """ê¸°ìˆ ì  ë¶„ì„ ìˆ˜í–‰"""
        try:
            if isinstance(data, str):
                symbol = data
                stock_data = StockData(
                    symbol=symbol,
                    name=f"Mock {symbol}",
                    current_price=100.0
                )
                logger.info(f"ğŸ” {symbol} Mock ê¸°ìˆ ì  ë¶„ì„ ì‹œì‘")
            else:
                stock_data = data
                symbol = stock_data.symbol
                logger.info(f"ğŸ” {symbol} ê¸°ìˆ ì  ë¶„ì„ ì‹œì‘")

            if os.getenv('IS_MOCK', 'false').lower() == 'true' or isinstance(data, str):
                return self._generate_mock_analysis(symbol)

            if stock_data.historical_data is None or stock_data.historical_data.empty:
                logger.warning(f"âš ï¸ {symbol}: íˆìŠ¤í† ë¦¬ ë°ì´í„° ì—†ìŒ, Mock ë¶„ì„ ì‚¬ìš©")
                return self._generate_mock_analysis(symbol)

            indicators = self.calculate_indicators(stock_data.historical_data)
            signals = self.generate_signals(indicators, stock_data.current_price)
            confidence = self._calculate_confidence(indicators, signals)
            summary = self._generate_summary(symbol, indicators, signals)

            result = TechnicalAnalysisResult(
                symbol=symbol,
                indicators=indicators,
                signals=signals,
                confidence=confidence,
                summary=summary
            )

            logger.info(f"âœ… {symbol} ê¸°ìˆ ì  ë¶„ì„ ì™„ë£Œ (ì‹ ë¢°ë„: {confidence:.2f})")
            return result

        except Exception as e:
            logger.error(f"âŒ ê¸°ìˆ ì  ë¶„ì„ ì¤‘ ì˜¤ë¥˜: {e}")
            return self._generate_mock_analysis(symbol if isinstance(data, str) else data.symbol)

    # ... (ê¸°íƒ€ í•¨ìˆ˜ëŠ” ë™ì¼)

    def calculate_stochastic(self, high: pd.Series, low: pd.Series, close: pd.Series, 
                           k_period: int = 14, d_period: int = 3) -> TechnicalIndicators:
        """ìŠ¤í† ìºìŠ¤í‹± ì˜¤ì‹¤ë ˆì´í„° ê³„ì‚°"""
        try:
            stoch_indicator = ta.momentum.StochasticOscillator(high=high, low=low, close=close, window=k_period, smooth_window=d_period)
            return TechnicalIndicators(stoch_k=stoch_indicator.stoch(), stoch_d=stoch_indicator.stoch_signal())
        except Exception as e:
            logger.error(f"âŒ ìŠ¤í† ìºìŠ¤í‹± ê³„ì‚° ì‹¤íŒ¨: {e}")
            return TechnicalIndicators()

    # ... (ê¸°íƒ€ í•¨ìˆ˜ëŠ” ë™ì¼)
```