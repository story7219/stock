# app.py - Test ëª¨ë“ˆ
# ì—­í• : Test ê´€ë ¨ ê¸°ëŠ¥ ì œê³µ

```python
# ğŸš€ ì™„ì „ ìë™í™” íˆ¬ì ë¶„ì„ ì‹œìŠ¤í…œ v4.0
# - ì½”ìŠ¤í”¼200Â·ë‚˜ìŠ¤ë‹¥100Â·S&P500 ì „ì²´ ì¢…ëª© ìë™ ë¶„ì„
# - íˆ¬ì ëŒ€ê°€ ì „ëµ ì ìš© + Gemini AI íŒë‹¨
# - ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ìµœì í™” (RAM 16GB, i5-4460 í™˜ê²½)
# - 24ì‹œê°„ ë¬´ì¸ ìš´ì˜ ê°€ëŠ¥
# - ìë™ ë°±ì—… ë° ì˜¤ë¥˜ ë³µêµ¬

from dataclasses import dataclass, asdict
from datetime import datetime, timedelta
from logging.handlers import RotatingFileHandler
from ml_engine import LightweightMLEngine
from scheduler import InvestmentScheduler
from system_monitor import SystemMonitor
from typing import Dict, List, Optional, Any
import asyncio
import importlib.util
import json
import logging
import os
import psutil
import schedule
import subprocess
import sys
import threading
import time
import traceback
import warnings
import zipfile


#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ğŸš€ ì™„ì „ ìë™í™” íˆ¬ì ë¶„ì„ ì‹œìŠ¤í…œ v4.0
========================================
- ì½”ìŠ¤í”¼200Â·ë‚˜ìŠ¤ë‹¥100Â·S&P500 ì „ì²´ ì¢…ëª© ìë™ ë¶„ì„
- íˆ¬ì ëŒ€ê°€ ì „ëµ ì ìš© + Gemini AI íŒë‹¨
- ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ìµœì í™” (RAM 16GB, i5-4460 í™˜ê²½)
- 24ì‹œê°„ ë¬´ì¸ ìš´ì˜ ê°€ëŠ¥
- ìë™ ë°±ì—… ë° ì˜¤ë¥˜ ë³µêµ¬
"""


# ê²½ê³  ë©”ì‹œì§€ ì–µì œ
warnings.filterwarnings('ignore')

# í”„ë¡œì íŠ¸ ê²½ë¡œ ì„¤ì •
PROJECT_ROOT = os.path.dirname(os.path.abspath(__file__))
sys.path.insert(0, PROJECT_ROOT)
sys.path.insert(0, os.path.join(PROJECT_ROOT, 'src'))

# ë¡œê¹… ì„¤ì •
def setup_logging():
    """ê³ ê¸‰ ë¡œê¹… ì‹œìŠ¤í…œ ì„¤ì •"""
    log_dir = os.path.join(PROJECT_ROOT, 'logs')
    os.makedirs(log_dir, exist_ok=True)

    log_format = '%(asctime)s | %(levelname)-8s | %(name)-20s | %(message)s'

    # íŒŒì¼ í•¸ë“¤ëŸ¬ (ì¼ë³„ ë¡œí…Œì´ì…˜)
    file_handler = RotatingFileHandler(
        os.path.join(log_dir, 'automation.log'),
        maxBytes=10*1024*1024,  # 10MB
        backupCount=7,
        encoding='utf-8'
    )
    file_handler.setFormatter(logging.Formatter(log_format))

    # ì½˜ì†” í•¸ë“¤ëŸ¬
    console_handler = logging.StreamHandler()
    console_handler.setFormatter(logging.Formatter(
        '%(asctime)s | %(levelname)-8s | %(message)s'
    ))

    # ë£¨íŠ¸ ë¡œê±° ì„¤ì •
    logger = logging.getLogger()
    logger.setLevel(logging.INFO)
    logger.addHandler(file_handler)
    logger.addHandler(console_handler)

    return logger

logger = setup_logging()

@dataclass
class SystemStatus:
    """ì‹œìŠ¤í…œ ìƒíƒœ ì •ë³´"""
    cpu_percent: float
    memory_percent: float
    available_memory_gb: float
    disk_free_gb: float
    is_healthy: bool
    timestamp: datetime

@dataclass
class AnalysisResult:
    """ë¶„ì„ ê²°ê³¼ ì •ë³´"""
    top5_stocks: List[Dict[str, Any]]
    analysis_time: datetime
    processing_duration: float
    strategy_scores: Dict[str, float]
    market_indices: Dict[str, Dict[str, float]]
    ai_reasoning: str

class CompleteAutomationSystem:
    """ì™„ì „ ìë™í™” íˆ¬ì ë¶„ì„ ì‹œìŠ¤í…œ"""
    # ... (rest of the code)
```
